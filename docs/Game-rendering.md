# 游戏渲染（Game Rendering）
## 渲染管线（Rendering Pipeline）
### 基于传统固定功能的渲染管线（Fixed Function Pipeline）
这种类型的渲染管线由GPU中的固定功能硬件单元实现，为游戏开发者提供了一个简单的、易于使用的工具，以生成2D和3D图形。然而，这种渲染管线的局限性比较大，只能使用一组预定义的纹理、材质和照明效果。这种渲染管线因此被现代游戏引擎所取代，但仍然被用于一些较低端的游戏开发领域。
### 基于可编程渲染管线（Programmable Rendering Pipeline）
这种类型的渲染管线可以定制和调整每个渲染阶段，以满足不同游戏开发项目的需求。这种渲染管线是由GPU硬件中的可编程着色器实现的，包括顶点着色器、几何着色器、像素着色器和计算着色器等，可编程渲染管线可以使用精细的算法计算光照、阴影、反射等视觉效果。
#### 前向渲染（Forward Rendering）
前向渲染是一种3D图形渲染技术，通过沿着场景中每个像素的视线投射并跟踪照明信息来生成渲染图像。它是一种基于像素的渲染方法，这意味着它会遍历屏幕上的每个像素，并为每个像素计算每个渲染对象的颜色和照明等信息。该方法是3D游戏中最常用的渲染技术之一。

前向渲染的主要特点是它更适合处理各种不同的照明效果。这种渲染技术不仅可以处理一些复杂的效果，如阴影和反射，还可以通过放置大量光源来创建更明亮和动态的场景。

在前向渲染中，渲染引擎需要对每个渲染对象执行多次渲染，这意味着在处理大量渲染对象的场景时，其性能可能会受到影响。因此，与后向渲染技术相比，前向渲染可能需要更多的计算和更高的性能要求。
##### 处理阶段
**本地坐标到视图坐标的变换**  
    在游戏中，物体通常都是以本地坐标系（local space）进行建模的。为了将物体渲染到屏幕上，需要将物体的本地坐标转换成视图坐标（view space），即相机坐标系下的坐标。这一步通常是通过乘以一个变换矩阵（View Matrix）实现的。

**背面裁剪**  
    将相机前面看不到的物体进行剔除，减少后续处理的负担。可以使用背面剔除（Backface Culling）技术实现，即只渲染物体的正面，剔除背面。

**光照计算**  
    在计算场景中物体的光照效果，可以使用多种光照模型，如基础的兰伯特反射模型、布林-菲涅尔反射模型、菲涅尔反射模型、毛发反射模型等。

**裁剪**  
    只渲染相机视角内的物体，可以使用视锥体（Frustum）进行裁剪。将视锥体的六个面分别与物体的包围盒或几何形状进行检测，剔除不在视锥体内的物体。

**投影**  
    将三维物体的坐标投影到屏幕上，通常使用透视投影（Perspective Projection）或正交投影（Orthographic Projection）。

**视图变换**  
    将投影后的物体从视锥体空间（clip space）转换到屏幕空间（screen space），包括将坐标从标准化设备坐标（Normalized Device Coordinates，NDC）转换为像素坐标。  
**光栅化**  
    将屏幕空间中的三角形网格转换为像素点，以便最终渲染到屏幕上。这一步通常包括三个子步骤：扫描线（Scanline）算法、三角形剪裁（Triangle Clipping）以及锯齿（Jittering）。在锯齿处理中，可以使用多种技术，如超采样（Supersampling）、抗锯齿（Antialiasing）等。

### 基于物理渲染（Physically Based Rendering, PBR）的渲染管线
这种类型的渲染管线是一种计算机图形学算法，旨在模拟真实物理光学的效果。这个渲染技术使用物理基础材质、能量守恒和较为精细的光照计算，以产生逼真的视觉效果。
#### 光线追踪渲染（Ray Tracing Rendering）
光线追踪渲染通过模拟逐个光线的相交行为来计算场景中的随时间变化的光源照明效果。它能更加真实地模拟光照、反射、折射、阴影等效果，在渲染图像中表现出更真实的物理特性。

在渲染管线中，光线追踪渲染技术运用了许多重要的算法，如求交、反射、折射、阴影等。渲染图像时，渲染引擎会发射数百万条光线，每条光线都会追踪并计算其在场景中的路径。这个过程需要大量的计算资源，但它可以实现非常真实的视觉效果，是现代游戏图形渲染中最高效、最逼真的技术之一。