# 游戏渲染（Game Rendering）
## 渲染管线（Rendering Pipeline）
### 前向渲染
前向渲染是一种3D图形渲染技术，通过沿着场景中每个像素的视线投射并跟踪照明信息来生成渲染图像。它是一种基于像素的渲染方法，这意味着它会遍历屏幕上的每个像素，并为每个像素计算每个渲染对象的颜色和照明等信息。该方法是3D游戏中最常用的渲染技术之一。

前向渲染的主要特点是它更适合处理各种不同的照明效果。这种渲染技术不仅可以处理一些复杂的效果，如阴影和反射，还可以通过放置大量光源来创建更明亮和动态的场景。

在前向渲染中，渲染引擎需要对每个渲染对象执行多次渲染，这意味着在处理大量渲染对象的场景时，其性能可能会受到影响。因此，与后向渲染技术相比，前向渲染可能需要更多的计算和更高的性能要求。
#### 处理阶段
本地坐标到视图坐标的变换
    在游戏中，物体通常都是以本地坐标系（local space）进行建模的。为了将物体渲染到屏幕上，需要将物体的本地坐标转换成视图坐标（view space），即相机坐标系下的坐标。这一步通常是通过乘以一个变换矩阵（View Matrix）实现的。
背面裁剪
    将相机前面看不到的物体进行剔除，减少后续处理的负担。可以使用背面剔除（Backface Culling）技术实现，即只渲染物体的正面，剔除背面。
光照计算
    在计算场景中物体的光照效果，可以使用多种光照模型，如基础的兰伯特反射模型、布林-菲涅尔反射模型、菲涅尔反射模型、毛发反射模型等
裁剪
    只渲染相机视角内的物体，可以使用视锥体（Frustum）进行裁剪。将视锥体的六个面分别与物体的包围盒或几何形状进行检测，剔除不在视锥体内的物体。
投影
    将三维物体的坐标投影到屏幕上，通常使用透视投影（Perspective Projection）或正交投影（Orthographic Projection）。
视图变换
    将投影后的物体从视锥体空间（clip space）转换到屏幕空间（screen space），包括将坐标从标准化设备坐标（Normalized Device Coordinates，NDC）转换为像素坐标。
光栅化
    将屏幕空间中的三角形网格转换为像素点，以便最终渲染到屏幕上。这一步通常包括三个子步骤：扫描线（Scanline）算法、三角形剪裁（Triangle Clipping）以及锯齿（Jittering）。在锯齿处理中，可以使用多种技术，如超采样（Supersampling）、抗锯齿（Antialiasing）等。
### 延迟渲染
延迟渲染管线（Deferred Rendering Pipeline）是一种在渲染过程中采用缓存技术的渲染管线。该渲染管线采用两个渲染缓冲区，一个缓存场景中的几何信息（位置、法线、颜色等），另一个缓存光照信息。这样可以在几何信息渲染完成后，统一进行光照计算，避免了前向渲染可能存在的大量重复计算。延迟渲染管线适合处理大型室内场景或者需要大量光源的场景。
### 后向渲染
后向渲染管线（Backward Rendering Pipeline）通常被用于实现透明物体的渲染。在该渲染管线中，渲染顺序和前向渲染相反，先渲染透明的物体，后渲染不透明的物体，可以避免透明物体遮挡了不透明物体的情况，同时可以避免透明物体被遮挡时产生的排序问题。
### 镜头空间渲染
镜头空间渲染管线（Screen Space Rendering Pipeline）是一种在屏幕空间内进行渲染的渲染技术。该渲染管线的优点是可以在屏幕空间内进行后期处理，例如全屏后处理、景深、环境光遮蔽（SSAO）等特效。由于只对屏幕可见像素进行操作，因此可以节省大量的计算资源。
### 光线追踪渲染
光线追踪渲染管线（Ray Tracing Rendering Pipeline）是一种基于真实物理模型的渲染管线，可以模拟真实光线在场景中的传播和反射。光线追踪渲染管线具有高度逼真的渲染效果，同时也需要极高的计算资源，因此目前主要在高端的游戏和电影领域使用。